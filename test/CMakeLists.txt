SET(PROJECT_NAME    MyTestApp)
SET(PROJECT_VERSION 1.2.8)

PROJECT(${PROJECT_NAME} C)
CMAKE_MINIMUM_REQUIRED(VERSION 3.21)

ADD_SUBDIRECTORY(shared_out_of_dir_symlink)
ADD_SUBDIRECTORY(shared_with_soname)

CMDEF_ADD_EXECUTABLE(
    TARGET ${PROJECT_NAME}
    SOURCES main.c
    VERSION 1.0.1
)
TARGET_LINK_LIBRARIES(${PROJECT_NAME} PUBLIC shared_out_of_dir_symlink-shared shared_with_soname-shared)

CMDEF_INSTALL(TARGET ${PROJECT_NAME})

# Create a package
CMDEF_PACKAGE(
    MAIN_TARGET ${PROJECT_NAME}-shared
    VERSION     ${PROJECT_VERSION}
)

SET(CPACK_GENERATOR ZIP)
INCLUDE(CPack)